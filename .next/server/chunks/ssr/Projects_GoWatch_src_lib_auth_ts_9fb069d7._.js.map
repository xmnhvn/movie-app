{"version":3,"sources":["../../../../../../Projects/GoWatch/src/lib/auth.ts"],"sourcesContent":["import { api, setAuthToken } from './api';\r\n\r\nexport async function signup(username: string, password: string) {\r\n  const res = await api.post('/auth/signup', { username, password });\r\n  const { user, token } = res.data;\r\n  if (token) {\r\n    try { localStorage.setItem('gowatch_token', token); } catch {}\r\n    setAuthToken(token);\r\n  }\r\n  return user;\r\n}\r\n\r\nexport async function login(username: string, password: string) {\r\n  const res = await api.post('/auth/login', { username, password });\r\n  const { user, token } = res.data;\r\n  if (token) {\r\n    try { localStorage.setItem('gowatch_token', token); } catch {}\r\n    setAuthToken(token);\r\n  }\r\n  return user;\r\n}\r\n\r\nexport async function createOrGetUser(username: string) {\r\n  const res = await api.post('/users', { username });\r\n  return res.data.user;\r\n}\r\n\r\nexport async function updateProfile(payload: { username?: string; password?: string }) {\r\n  const res = await api.put('/user', payload);\r\n  return res.data.user;\r\n}\r\n\r\nexport async function uploadAvatar(file: File) {\r\n  const form = new FormData();\r\n  form.append('avatar', file);\r\n  const res = await api.post('/user/avatar', form, {\r\n    headers: { 'Content-Type': 'multipart/form-data' }\r\n  });\r\n  return res.data.user;\r\n}\r\n\r\nexport async function removeAvatar() {\r\n  const res = await api.delete('/user/avatar');\r\n  return res.data.user;\r\n}\r\n\r\nexport async function deleteAccount(): Promise<void> {\r\n  await api.delete('/user');\r\n}\r\n"],"names":[],"mappings":"8CAAA,IAAA,EAAA,EAAA,CAAA,CAAA,gBAEO,eAAe,EAAO,CAAgB,CAAE,CAAgB,EAE7D,GAAM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,CADZ,MAAM,EAAA,GAAG,CAAC,IAAI,CAAC,eAAgB,UAAE,WAAU,CAAS,EAAA,EACpC,IAAI,CAChC,GAAI,EAAO,CACT,GAAI,CAAE,aAAa,OAAO,CAAC,gBAAiB,EAAQ,CAAE,KAAM,CAAC,CAC7D,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EACf,CACA,OAAO,CACT,CAEO,eAAe,EAAM,CAAgB,CAAE,CAAgB,EAE5D,GAAM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,CADZ,MAAM,EAAA,GAAG,CAAC,IAAI,CAAC,cAAe,UAAE,WAAU,CAAS,EAAA,EACnC,IAAI,CAChC,GAAI,EAAO,CACT,GAAI,CAAE,aAAa,OAAO,CAAC,gBAAiB,EAAQ,CAAE,KAAM,CAAC,CAC7D,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EACf,CACA,OAAO,CACT,CAEO,eAAe,EAAgB,CAAgB,EAEpD,MAAO,CADK,MAAM,EAAA,GAAG,CAAC,IAAI,CAAC,SAAU,UAAE,CAAS,EAAA,EACrC,IAAI,CAAC,IAAI,AACtB,CAEO,eAAe,EAAc,CAAiD,EAEnF,MAAO,CADK,MAAM,EAAA,GAAG,CAAC,GAAG,CAAC,QAAS,EAAA,EACxB,IAAI,CAAC,IAAI,AACtB,CAEO,eAAe,EAAa,CAAU,EAC3C,IAAM,EAAO,IAAI,SAKjB,OAJA,EAAK,MAAM,CAAC,SAAU,GACV,AAGL,OAHW,EAAA,GAAG,CAAC,IAAI,CAAC,eAAgB,EAAM,CAC/C,QAAS,CAAE,eAAgB,qBAAsB,CACnD,EAAA,EACW,IAAI,CAAC,IAAI,AACtB,CAEO,eAAe,IAEpB,MAAO,CADK,MAAM,EAAA,GAAG,CAAC,MAAM,CAAC,eAAA,EAClB,IAAI,CAAC,IAAI,AACtB,CAEO,eAAe,IACpB,MAAM,EAAA,GAAG,CAAC,MAAM,CAAC,QACnB"}