{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/xneam/Projects/GoWatch/src/lib/auth.ts"],"sourcesContent":["import { api, setAuthToken } from './api';\r\n\r\nexport async function signup(username: string, password: string) {\r\n  const res = await api.post('/auth/signup', { username, password });\r\n  const { user, token } = res.data;\r\n  if (token) {\r\n    try { localStorage.setItem('gowatch_token', token); } catch {}\r\n    setAuthToken(token);\r\n  }\r\n  return user;\r\n}\r\n\r\nexport async function login(username: string, password: string) {\r\n  const res = await api.post('/auth/login', { username, password });\r\n  const { user, token } = res.data;\r\n  if (token) {\r\n    try { localStorage.setItem('gowatch_token', token); } catch {}\r\n    setAuthToken(token);\r\n  }\r\n  return user;\r\n}\r\n\r\nexport async function createOrGetUser(username: string) {\r\n  const res = await api.post('/users', { username });\r\n  return res.data.user;\r\n}\r\n\r\nexport async function updateProfile(payload: { username?: string; password?: string }) {\r\n  const res = await api.put('/user', payload);\r\n  return res.data.user;\r\n}\r\n\r\nexport async function uploadAvatar(file: File) {\r\n  const form = new FormData();\r\n  form.append('avatar', file);\r\n  const res = await api.post('/user/avatar', form, {\r\n    headers: { 'Content-Type': 'multipart/form-data' }\r\n  });\r\n  return res.data.user;\r\n}\r\n\r\nexport async function removeAvatar() {\r\n  const res = await api.delete('/user/avatar');\r\n  return res.data.user;\r\n}\r\n\r\nexport async function deleteAccount(): Promise<void> {\r\n  await api.delete('/user');\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAEO,eAAe,OAAO,QAAgB,EAAE,QAAgB;IAC7D,MAAM,MAAM,MAAM,2IAAG,CAAC,IAAI,CAAC,gBAAgB;QAAE;QAAU;IAAS;IAChE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI;IAChC,IAAI,OAAO;QACT,IAAI;YAAE,aAAa,OAAO,CAAC,iBAAiB;QAAQ,EAAE,OAAM,CAAC;QAC7D,IAAA,oJAAY,EAAC;IACf;IACA,OAAO;AACT;AAEO,eAAe,MAAM,QAAgB,EAAE,QAAgB;IAC5D,MAAM,MAAM,MAAM,2IAAG,CAAC,IAAI,CAAC,eAAe;QAAE;QAAU;IAAS;IAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI;IAChC,IAAI,OAAO;QACT,IAAI;YAAE,aAAa,OAAO,CAAC,iBAAiB;QAAQ,EAAE,OAAM,CAAC;QAC7D,IAAA,oJAAY,EAAC;IACf;IACA,OAAO;AACT;AAEO,eAAe,gBAAgB,QAAgB;IACpD,MAAM,MAAM,MAAM,2IAAG,CAAC,IAAI,CAAC,UAAU;QAAE;IAAS;IAChD,OAAO,IAAI,IAAI,CAAC,IAAI;AACtB;AAEO,eAAe,cAAc,OAAiD;IACnF,MAAM,MAAM,MAAM,2IAAG,CAAC,GAAG,CAAC,SAAS;IACnC,OAAO,IAAI,IAAI,CAAC,IAAI;AACtB;AAEO,eAAe,aAAa,IAAU;IAC3C,MAAM,OAAO,IAAI;IACjB,KAAK,MAAM,CAAC,UAAU;IACtB,MAAM,MAAM,MAAM,2IAAG,CAAC,IAAI,CAAC,gBAAgB,MAAM;QAC/C,SAAS;YAAE,gBAAgB;QAAsB;IACnD;IACA,OAAO,IAAI,IAAI,CAAC,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,2IAAG,CAAC,MAAM,CAAC;IAC7B,OAAO,IAAI,IAAI,CAAC,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,2IAAG,CAAC,MAAM,CAAC;AACnB"}}]
}